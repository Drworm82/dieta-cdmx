<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dieta Económica CDMX - Menús diarios</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: auto;
      padding: 1rem;
      background: #f9f9f9;
      color: #333;
    }
    header {
      background-color: #4caf50;
      color: white;
      padding: 1rem;
      text-align: center;
      margin-bottom: 1rem;
    }
    h2 {
      color: #4caf50;
    }
    button {
      cursor: pointer;
      background-color: #4caf50;
      color: white;
      border: none;
      padding: 8px 16px;
      margin: 0 5px 10px 0;
      border-radius: 4px;
      font-size: 1rem;
    }
    button:disabled {
      background-color: #a5d6a7;
      cursor: default;
    }
    .menu-section {
      background: white;
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 5px;
      box-shadow: 0 0 5px #ccc;
    }
    ul, ol {
      margin: 0 0 1rem 20px;
    }
    footer {
      text-align: center;
      font-size: 0.9rem;
      padding: 1rem 0;
      color: #666;
    }
    .precio {
      color: #333;
      font-style: italic;
      margin-left: 10px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Dieta Económica y de Temporada</h1>
    <p>Menús diarios con recetas completas para Ciudad de México</p>
  </header>

  <main>
    <div>
      <button id="prevBtn">Anterior</button>
      <button id="nextBtn">Siguiente</button>
    </div>

    <h2 id="dateTitle">Cargando menú...</h2>

    <div class="menu-section" id="desayuno">
      <h3>Desayuno</h3>
      <strong id="desayuno-nombre"></strong>
      <p><strong>Ingredientes:</strong></p>
      <ul id="desayuno-ingredientes"></ul>
      <p><strong>Preparación:</strong></p>
      <ol id="desayuno-preparacion"></ol>
      <p><em>Tiempo aproximado: <span id="desayuno-tiempo"></span></em></p>
      <p><em>Total: $<span id="desayuno-total"></span></em></p>
    </div>

    <div class="menu-section" id="comida">
      <h3>Comida</h3>
      <strong id="comida-nombre"></strong>
      <p><strong>Ingredientes:</strong></p>
      <ul id="comida-ingredientes"></ul>
      <p><strong>Preparación:</strong></p>
      <ol id="comida-preparacion"></ol>
      <p><em>Tiempo aproximado: <span id="comida-tiempo"></span></em></p>
      <p><em>Total: $<span id="comida-total"></span></em></p>
    </div>

    <div class="menu-section" id="cena">
      <h3>Cena</h3>
      <strong id="cena-nombre"></strong>
      <p><strong>Ingredientes:</strong></p>
      <ul id="cena-ingredientes"></ul>
      <p><strong>Preparación:</strong></p>
      <ol id="cena-preparacion"></ol>
      <p><em>Tiempo aproximado: <span id="cena-tiempo"></span></em></p>
      <p><em>Total: $<span id="cena-total"></span></em></p>
    </div>
  </main>

  <footer>© 2025 Dieta Económica CDMX – Sitio en desarrollo</footer>

  <script>
    let menus = [];
    let currentDay = 0;

    fetch('menus.json')
      .then(response => {
        if (!response.ok) throw new Error('Error en la respuesta HTTP: ' + response.status);
        return response.json();
      })
      .then(data => {
        menus = data;
        if (menus.length === 0) throw new Error('El arreglo de menús está vacío');
        mostrarMenu(currentDay);
        actualizarBotones();
      })
      .catch(error => {
        document.getElementById('dateTitle').textContent = 'Error cargando menús: ' + error.message;
        console.error('Error al cargar JSON:', error);
      });

    function mostrarMenu(dayIndex) {
      const menu = menus[dayIndex];
      if (!menu) return;

      document.getElementById('dateTitle').textContent = `Día ${menu.day} - ${menu.date}`;

      mostrarComida('desayuno', menu.desayuno);
      mostrarComida('comida', menu.comida);
      mostrarComida('cena', menu.cena);
    }

    function mostrarComida(tipo, datos) {
      document.getElementById(`${tipo}-nombre`).textContent = datos.nombre;
      document.getElementById(`${tipo-tiempo}`).textContent = datos.tiempo;

      // Ingredientes con precio
      const ul = document.getElementById(`${tipo}-ingredientes`);
      ul.innerHTML = '';
      let total = 0;
      datos.ingredientes.forEach(ing => {
        const li = document.createElement('li');
        li.innerHTML = `${ing.nombre} <span class="precio">($${ing.precio.toFixed(2)})</span>`;
        ul.appendChild(li);
        total += ing.precio;
      });
      document.getElementById(`${tipo}-total`).textContent = total.toFixed(2);

      // Preparación
      const ol = document.getElementById(`${tipo}-preparacion`);
      ol.innerHTML = '';
      datos.preparacion.forEach(paso => {
        const li = document.createElement('li');
        li.textContent = paso;
        ol.appendChild(li);
      });
    }

    function actualizarBotones() {
      document.getElementById('prevBtn').disabled = currentDay === 0;
      document.getElementById('nextBtn').disabled = currentDay === menus.length - 1;
    }

    document.getElementById('prevBtn').addEventListener('click', () => {
      if (currentDay > 0) {
        currentDay--;
        mostrarMenu(currentDay);
        actualizarBotones();
      }
    });

    document.getElementById('nextBtn').addEventListener('click', () => {
      if (currentDay < menus.length - 1) {
        currentDay++;
        mostrarMenu(currentDay);
        actualizarBotones();
      }
    });
  </script>
</body>
</html>
